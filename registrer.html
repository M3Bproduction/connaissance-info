<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCxYhigXFEwE6RrLT_YbnFNAhctY2CCHj4",
    authDomain: "connessance-info.firebaseapp.com",
    projectId: "connessance-info",
    storageBucket: "connessance-info.firebasestorage.app",
    messagingSenderId: "272184214356",
    appId: "1:272184214356:web:37f05f99d9881f6577fec1",
    measurementId: "G-NZWFGJST12"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app); // üî¥ AJOUT√â : indispensable

  // Gestion du formulaire
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector(".login-form");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const fullname = document.getElementById("fullname").value;
      const num = document.getElementById("num").value;
      const date = document.getElementById("date").value;
      const lieu = document.getElementById("lieu").value;
      const formation = document.getElementById("formation").value;
      const heure = document.getElementById("heure").value;

      try {
        await addDoc(collection(db, "inscriptions"), {
          fullname,
          num,
          date,
          lieu,
          formation,
          heure,
          createdAt: new Date()
        });

        alert("‚úÖ Inscription enregistr√©e avec succ√®s !");
        form.reset();
      } catch (error) {
        alert("‚ùå Erreur lors de l'inscription : " + error.message);
      }
    });
  });
</script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCxYhigXFEwE6RrLT_YbnFNAhctY2CCHj4",
    authDomain: "connessance-info.firebaseapp.com",
    projectId: "connessance-info",
    storageBucket: "connessance-info.firebasestorage.app",
    messagingSenderId: "272184214356",
    appId: "1:272184214356:web:37f05f99d9881f6577fec1",
    measurementId: "G-NZWFGJST12"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app); // üî¥ AJOUT√â : indispensable

  // Gestion du formulaire
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector(".login-form");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const fullname = document.getElementById("fullname").value;
      const num = document.getElementById("num").value;
      const date = document.getElementById("date").value;
      const lieu = document.getElementById("lieu").value;
      const formation = document.getElementById("formation").value;
      const heure = document.getElementById("heure").value;

      try {
        await addDoc(collection(db, "inscriptions"), {
          fullname,
          num,
          date,
          lieu,
          formation,
          heure,
          createdAt: new Date()
        });

        alert("‚úÖ Inscription enregistr√©e avec succ√®s !");
        form.reset();
      } catch (error) {
        alert("‚ùå Erreur lors de l'inscription : " + error.message);
      }
    });
  });
</script>
